<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mainly Norfolk Decolumner</title>
</head>
<body>
    <form id="address-input">
        <label for="href">None</label>
          <input
            type="text"
            id="href"
            name="sample-input"
            value="https://mainlynorfolk.info/lloyd/songs/thecuckoo.html"
          />
        </li>
        <button type='submit'>Submit</button>
    </form>
    <div class="message"></div>
</body>
</html>

<script>

  async function handleSubmit(event) {
    event.preventDefault();

    const data = new FormData(event.target);

    const result = await fetch('/.netlify/functions/get-music', {
      method: 'POST',
      body: JSON.stringify({
        href: data.get('href')
      }),
    }).then((response) => {
      document.querySelector(
        '.message',
      ).innerText = `Response: ${response.status} â€” ${response.statusText}`;
    });
  }

  document.querySelector('#address-input').addEventListener('submit', handleSubmit);
</script>